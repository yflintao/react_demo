{"version":3,"file":"static/js/972.9601ce07.chunk.js","mappings":"uQAKOA,EAAUC,EAAAA,EAAAA,OAmHjB,EAhHa,WACT,OAAgCC,EAAAA,EAAAA,UAAS,CACrCC,KAAM,GACNC,MAAO,IACT,eAHKC,EAAQ,KAAEC,EAAW,KAM5B,GAA4BJ,EAAAA,EAAAA,UAAS,CACjCK,KAAM,EACNC,KAAM,GACNC,SAAS,KACX,eAJKC,EAAM,KAAEC,EAAS,MAMxBC,EAAAA,EAAAA,YAAU,YACN,uBAAC,iGAC0C,OAAjCC,GAAeC,EAAAA,EAAAA,IAAWJ,GAAQ,EAAD,OAClBK,EAAAA,GAAAA,IAAS,kBAAmB,CAACL,OAAOG,IAAe,KAAD,EAAjEG,EAAM,SACUA,EAAOC,KAAtBb,EAAK,EAALA,MAAOc,EAAI,EAAJA,KACdZ,EAAY,CACRH,KAAMe,EACNd,MAAAA,IACF,0CAPN,EASJ,GAAG,CAACM,IAEJ,IA0BMS,EAAU,CACZ,CACIC,MAAO,eACPC,UAAW,QACXC,MAAO,KAEX,CACIF,MAAO,eACPC,UAAW,eACXC,MAAO,IACPC,OAAQ,SAACL,GACL,OAAOA,GAAQA,EAAoB,aACvC,GAEJ,CACIE,MAAO,eACPC,UAAW,OACXE,OAAQ,SAAAN,GAAI,OAzBJ,IAyBqBA,GAxBnB,SAAC,IAAG,CAACO,MAAM,QAAO,uCAElB,SAAC,IAAG,CAACA,MAAM,MAAK,+BAsBQ,GAEtC,CACIJ,MAAO,2BACPC,UAAW,eAInB,OACI,4BAEI,SAAC,IAAI,CACDD,MAAM,iCACNK,MAAO,CAACC,aAAc,IAAI,UAE1B,SAAC1B,EAAM,CACH2B,YAAY,+DACZC,YAAU,EACVC,YAAY,SACZrB,KAAK,QACLsB,SA/DC,SAACrB,GACdE,GAAU,kBACHD,GAAM,IACTH,KAAK,EACLE,SAAAA,IAER,OA6DQ,SAAC,IAAI,CAACW,MAAK,uEAAgBf,EAASD,MAAK,6BAAQ,UAC7C,SAAC,IAAK,CACF2B,OAAO,KACPZ,QAASA,EACTa,WAAY3B,EAASF,KACrB8B,WACI,CACIC,SAAUxB,EAAOF,KACjB2B,MAAO9B,EAASD,MAChBgC,SAnEL,SAAC7B,GAChBI,GAAU,kBACHD,GAAM,IACTH,KAAAA,IAER,EA+DwB8B,QAAS3B,EAAOH,MAGxB+B,UAAQ,QAK5B,C","sources":["pages/News/index.js"],"sourcesContent":["import './index.scss'\nimport {Table, Tag, Card, Input} from 'antd'\nimport {useEffect, useState} from 'react'\nimport {http,filterData} from '@/utils'\n\nconst {Search} = Input\n\n\nconst News = () => {\n    const [newsData, setNewsData] = useState({\n        list: [],// 文章列表\n        count: 0 // 文章数量\n    })\n\n    // 文章参数管理\n    const [params, setParams] = useState({\n        page: 1,\n        size: 10,\n        keywords:''\n    })\n    // 获取文章列表\n    useEffect(() => {\n        (async () => {\n            const filterParams = filterData(params);\n            const recode = await http.get('/article/search', {params:filterParams});\n            const {count, rows} = recode.data\n            setNewsData({\n                list: rows,\n                count\n            })\n        })()\n    }, [params])\n\n    const onSearch = (keywords) => {\n        setParams({\n            ...params,\n            page:1,\n            keywords\n        })\n    }\n\n    // 翻页实现\n    const pageChange = (page) => {\n        setParams({\n            ...params,\n            page\n        })\n    }\n\n    const formatStatus = (type) => {\n        let tagHtml = '';\n        if(type === 1){\n            tagHtml = <Tag color=\"green\">审核成功</Tag>\n        }else{\n            tagHtml = <Tag color=\"red\">未审核</Tag>\n        }\n        return tagHtml;\n    }\n\n    const columns = [\n        {\n            title: '标题',\n            dataIndex: 'title',\n            width: 220\n        },\n        {\n            title: '栏目',\n            dataIndex: 'categoryRows',\n            width: 220,\n            render: (rows) => {\n                return rows && rows['category_name'];\n            }\n        },\n        {\n            title: '状态',\n            dataIndex: 'type',\n            render: data => formatStatus(data)\n        },\n        {\n            title: '发布时间',\n            dataIndex: 'creat_time'\n        }\n    ]\n\n    return (\n        <div>\n            {/* 筛选区域 */}\n            <Card\n                title=\"关键词检索\"\n                style={{marginBottom: 12}}\n            >\n                <Search\n                    placeholder=\"输入需要检索的关键词\"\n                    allowClear\n                    enterButton=\"Search\"\n                    size=\"large\"\n                    onSearch={onSearch}\n                />\n            </Card>\n            {/* 列表区域 */}\n            <Card title={`根据筛选条件共查询到 ${newsData.count} 条结果：`}>\n                <Table\n                    rowKey=\"id\"\n                    columns={columns}\n                    dataSource={newsData.list}\n                    pagination={\n                        {\n                            pageSize: params.size,\n                            total: newsData.count,\n                            onChange: pageChange,\n                            current: params.page\n                        }\n                    }\n                    bordered\n                />\n            </Card>\n        </div>\n    )\n}\n\nexport default News"],"names":["Search","Input","useState","list","count","newsData","setNewsData","page","size","keywords","params","setParams","useEffect","filterParams","filterData","http","recode","data","rows","columns","title","dataIndex","width","render","color","style","marginBottom","placeholder","allowClear","enterButton","onSearch","rowKey","dataSource","pagination","pageSize","total","onChange","current","bordered"],"sourceRoot":""}