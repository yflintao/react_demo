"use strict";(self.webpackChunkgeek_pc=self.webpackChunkgeek_pc||[]).push([[592],{4592:function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var r=n(1413),i=n(4165),a=n(5861),s=n(9439),c=n(6871),o=n(501),u=n(32),l=n(3734),d=n(7123),h=n(7528),Z=n(3099),f=n(7309),p=n(4015),x=n(8164),m=n(1541),v=n(3231),j=n(5357),g=(n(2173),n(2072)),w=n(1752),k=n(2622),y=n(7363),I=n(6233),_=n(6525),b=n(184),C=l.Z.Option,P=d.Z.RangePicker,S=(0,u.Pi)((function(){var e=(0,_.o)().channelStore,t=(0,y.useState)({list:[],count:0}),n=(0,s.Z)(t,2),u=n[0],d=n[1],S=(0,y.useState)({page:1,size:10,keywords:""}),Y=(0,s.Z)(S,2),L=Y[0],J=Y[1];(0,y.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t,n,r,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.dJ.get("/article/search",{params:L});case 2:t=e.sent,n=t.data,r=n.count,a=n.rows,d({list:a,count:r});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[L]);var z=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.dJ.get("/mp/articles/".concat(t.id));case 2:J((0,r.Z)((0,r.Z)({},L),{},{page:1}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=(0,c.s0)(),M=[{title:"\u6807\u9898",dataIndex:"title",width:220},{title:"\u680f\u76ee",dataIndex:"categoryRows",width:220,render:function(e){return e&&e.category_name}},{title:"\u72b6\u6001",dataIndex:"type",render:function(e){return t=e,{1:(0,b.jsx)(h.Z,{color:"red",children:"\u5ba1\u6838\u6210\u529f"}),2:(0,b.jsx)(h.Z,{color:"green",children:"\u5ba1\u6838\u5931\u8d25"})}[t];var t}},{title:"\u53d1\u5e03\u65f6\u95f4",dataIndex:"creat_time"},{title:"\u64cd\u4f5c",render:function(e){return(0,b.jsxs)(Z.Z,{size:"middle",children:[(0,b.jsx)(f.Z,{type:"primary",shape:"circle",icon:(0,b.jsx)(w.Z,{}),onClick:function(){return function(e){D("/publish?id=".concat(e.id))}(e)}}),(0,b.jsx)(f.Z,{type:"primary",danger:!0,shape:"circle",icon:(0,b.jsx)(k.Z,{}),onClick:function(){return z(e)}})]})},fixed:"right"}];return(0,b.jsxs)("div",{children:[(0,b.jsx)(p.Z,{title:(0,b.jsxs)(x.Z,{separator:">",children:[(0,b.jsx)(x.Z.Item,{children:(0,b.jsx)(o.rU,{to:"/home",children:"\u9996\u9875"})}),(0,b.jsx)(x.Z.Item,{children:"\u5185\u5bb9\u7ba1\u7406"})]}),style:{marginBottom:20},children:(0,b.jsxs)(m.Z,{onFinish:function(e){var t=e.channel_id,n=e.date,i=e.status,a={};a.status=i,t&&(a.channel_id=t),n&&(a.begin_pubdate=n[0].format("YYYY-MM-DD"),a.end_pubdate=n[1].format("YYYY-MM-DD")),J((0,r.Z)((0,r.Z)({},L),a))},initialValues:{status:null},children:[(0,b.jsx)(m.Z.Item,{label:"\u72b6\u6001",name:"status",children:(0,b.jsxs)(v.ZP.Group,{children:[(0,b.jsx)(v.ZP,{value:null,children:"\u5168\u90e8"}),(0,b.jsx)(v.ZP,{value:0,children:"\u8349\u7a3f"}),(0,b.jsx)(v.ZP,{value:1,children:"\u5f85\u5ba1\u6838"}),(0,b.jsx)(v.ZP,{value:2,children:"\u5ba1\u6838\u901a\u8fc7"}),(0,b.jsx)(v.ZP,{value:3,children:"\u5ba1\u6838\u5931\u8d25"})]})}),(0,b.jsx)(m.Z.Item,{label:"\u9891\u9053",name:"channel_id",children:(0,b.jsx)(l.Z,{placeholder:"\u8bf7\u9009\u62e9\u6587\u7ae0\u9891\u9053",style:{width:265},children:e.channelList.map((function(e){return(0,b.jsx)(C,{value:e.id,children:e.category_name},e.id)}))})}),(0,b.jsx)(m.Z.Item,{label:"\u65e5\u671f",name:"date",children:(0,b.jsx)(P,{locale:g.Z})}),(0,b.jsx)(m.Z.Item,{children:(0,b.jsx)(f.Z,{type:"primary",htmlType:"submit",style:{marginLeft:80},children:"\u7b5b\u9009"})})]})}),(0,b.jsx)(p.Z,{title:"\u6839\u636e\u7b5b\u9009\u6761\u4ef6\u5171\u67e5\u8be2\u5230 ".concat(u.count," \u6761\u7ed3\u679c\uff1a"),children:(0,b.jsx)(j.Z,{rowKey:"id",columns:M,dataSource:u.list,pagination:{pageSize:L.size,total:u.count,onChange:function(e){J((0,r.Z)((0,r.Z)({},L),{},{page:e}))},current:L.page},bordered:!0})})]})}))},6525:function(e,t,n){n.d(t,{o:function(){return m}});var r=n(3144),i=n(5671),a=n(7363),s=n.n(a),c=n(4165),o=n(5861),u=n(4098),l=n(6233),d=(0,r.Z)((function e(){var t=this;(0,i.Z)(this,e),this.token=(0,l.LP)()||"",this.getToken=function(){var e=(0,o.Z)((0,c.Z)().mark((function e(n){var r,i,a,s;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.user_name,i=n.user_password,a=n.validateCode,e.next=3,l.dJ.post("/admin/login",{user_name:r,user_password:i,validateCode:a});case 3:s=e.sent,t.token=s.data.token,(0,l.o4)(t.token);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.loginOut=function(){t.token="",(0,l.gy)()},(0,u.ky)(this)})),h=d,Z=(0,r.Z)((function e(){var t=this;(0,i.Z)(this,e),this.userInfo={},this.getUserInfo=(0,o.Z)((0,c.Z)().mark((function e(){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.dJ.get("/admin/userInfo");case 2:n=e.sent,t.userInfo=n.data||{};case 4:case"end":return e.stop()}}),e)}))),(0,u.ky)(this)})),f=(0,r.Z)((function e(){var t=this;(0,i.Z)(this,e),this.channelList=[],this.loadChannelList=(0,o.Z)((0,c.Z)().mark((function e(){var n,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.dJ.get("/category/index");case 2:n=e.sent,r=n.data,t.channelList=r||[];case 5:case"end":return e.stop()}}),e)}))),(0,u.ky)(this)}));(0,u.jQ)({enforceActions:"never"});var p=new((0,r.Z)((function e(){(0,i.Z)(this,e),this.loginStore=new h,this.userStore=new Z,this.channelStore=new f}))),x=s().createContext(p),m=function(){return s().useContext(x)}}}]);
//# sourceMappingURL=592.9ea28b2b.chunk.js.map